

Thread model:
New Action objects are created for each request.
Each Action object is saved in Value Stack.
(Each HTTP request has its own ValueStack)
And then it could be accessed in JSP


ValueStack is request-scoped and thread-safe because it is stored inside ActionContext, 
which is maintained in a ThreadLocal. 
Each request thread gets its own ActionContext and therefore its own ValueStack.

ValueStack stack =
    ActionContext.getContext().getValueStack();
Is ValueStack ThreadLocal?

Indirectly, YES.

ValueStack itself is NOT a ThreadLocal

ActionContext is ThreadLocal

ValueStack lives inside ActionContext

ðŸ‘‰ Therefore:

Each request (thread) gets its own ValueStack

ðŸ”¹ Actual Architecture
Thread relationship
HTTP Request
   â†“
Servlet Container Thread
   â†“
ActionContext (ThreadLocal)
   â†“
ValueStack

------------------

HTTP Request
    â†“
Thread (T1)
    â†“
ThreadLocal<ActionContext>
    â†“
ActionContext
    â†“
ValueStack
